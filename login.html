<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<!--Designerd by: http://bootstrapthemes.co-->

<head>
	<meta charset="utf-8">
	<title>거북이 공장</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" href="http://www.yoursite.com/favicon.ico?v=2" />
	<link rel="icon" type="favicon" href="favicon.ico">

	<!--Google Font link-->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Raleway:400,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="assets/css/fonticons.css">
	<link rel="stylesheet" href="assets/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/css/bootstrap.css">
	<link rel="stylesheet" href="assets/css/bootsnav.css">



	<!--For Plugins external css-->
	<!--<link rel="stylesheet" href="assets/css/plugins.css" />-->

	<!--Theme custom css -->
	<link rel="stylesheet" href="assets/css/style.css">
	<link rel="stylesheet" href="assets/css/styles.css">
	<!--<link rel="stylesheet" href="assets/css/colors/maron.css">-->

	<!--Theme Responsive css-->
	<link rel="stylesheet" href="assets/css/responsive.css" />

	<script src="assets/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>

	<!--Google login-->
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
	<script src="https://apis.google.com/js/api:client.js"></script>

	<script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body data-spy="scroll" data-target=".navbar-collapse">


	<!-- Preloader -->
	<div id="loading">
		<div id="loading-center">
			<div id="loading-center-absolute">
				<div class="object" id="object_one"></div>
				<div class="object" id="object_two"></div>
				<div class="object" id="object_three"></div>
				<div class="object" id="object_four"></div>
			</div>
		</div>
	</div>
	<!--End off Preloader -->


	<div class="culmn">
		<!--Home page style-->



		<nav class="navbar navbar-light navbar-expand-lg  navbar-fixed no-background bootsnav">
			<div class="container">
				<!-- Start Atribute Navigation -->
				<div class="attr-nav">
					<ul>
						<li class="login"><a href="#" >Login</a></li>
						<li><a href="mypage.html"><img src="assets/images/user.png" alt="mypage"></a></li>
					</ul>
				</div>
				<!-- End Atribute Navigation -->

				<!-- Start Header Navigation -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-menu">
						<span></span>
						<span></span>
						<span></span>
					</button>

					<a class="navbar-brand" href="index.html">

						<img src="assets/images/logo.png" class="logo logo-display m-top-10" alt="">
						<img src="assets/images/logo.png" class="logo logo-scrolled m-top-10" alt="">

					</a>
				</div>
				<!-- End Header Navigation -->

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="navbar-menu">
					<ul class="nav navbar-nav navbar-right" data-in="fadeInDown" data-out="fadeOutUp">
						<li><a href="index.html#hello">Hello</a></li>
						<li><a href="index.html#about">About</a></li>
						<li><a href="index.html#prevention">Prevention</a></li>
						<li><a href="index.html#service">Services</a></li>
						<li><a href="index.html#contact">Contact</a></li>
					</ul>
				</div>
				<!-- /.navbar-collapse -->
			</div>
		</nav>
		<!--Home Sections-->

		<br><br><br><br><br>

		<!--login box-->
		<section class="roomy-100">
			<div class="container">
				<div class="head_title text-center">
					<h2>로그인</h2>
				</div><br><br>
				<table class="table text-center">
					<tr>
						<a id="kakao-login-btn" style="margin-left: 440px;"></a>
					</tr>
				</table>
			</div>
		</section>
		<!--End login box-->
	</div>

	<script src="assets/js/vendor/jquery-1.11.2.min.js"></script>
	<script src="assets/js/vendor/popper.min.js"></script>
	<script src="assets/js/vendor/bootstrap.min.js"></script>

	<script src="assets/js/jquery.magnific-popup.js"></script>
	<script src="assets/js/jquery.easing.1.3.js"></script>
	<script src="assets/js/slick.min.js"></script>
	<script src="assets/js/jquery.collapse.js"></script>
	<script src="assets/js/bootsnav.js"></script>

	<!-- Font Awesome icons (free version)-->
	<script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>


	<script src="assets/js/plugins.js"></script>
	<script src="assets/js/main.js"></script>
	<script src="JS/dom.js"></script>
	<script src="assets/js/custom.js"></script>

	<script type="text/javascript">
		function setCookie(key, value, expiredays) {
			var todayDate = new Date();
			todayDate.setDate(todayDate.getDate() + expiredays);
			document.cookie = key + "=" + escape(value) + "; path=/; expires=" + todayDate.toGMTString() + ";"
		}

		let create_turtle = function (email) {
			console.log(localStorage.getItem("key", ''));
			var data1 = null
			$(document).ready(function () {
				$.ajax({
					type: "POST",
					contentType: "application/json; charset=utf-8",
					data: JSON.stringify({
						"email": email,
						"name": "거북이",
						"num": 1,
						"ease":0,
						"best":""
					}),
					url: 'http://107.21.77.37/turtle/new',
					dataType: "json",
					accept: "application/json",
					//전달할 때 사용되는 파라미터 변수명
					// 이 속성을 생략하면 callback 파라미터 변수명으로 전달된다.
					success: function (data, textStatus, jqXHR) {
						console.log('success');
						console.log(data);
						var data1 = {
							email: data.email,
							name: data.name,
							number: data.num,
							ease: data.ease,
							best: data.best,
							created: data.created,
						}
						console.log(data1)
						setCookie("email",data.email,100);
						setCookie("name",data.name,100);
						setCookie("num",data.num,100);
						setCookie("ease",data.ease,100);
						setCookie("best",data.best,100);
						setCookie("created",data.created,100);
						console.log(document.cookie);
						$('.result').html('dfdjflks' + data1.email);
					},
					complete: function (d) {
						console.log('d')
					},
					error: function (xhr, textStatus, error) {
						console.log(xhr.responseText);
						console.log(textStatus);
						console.log(error);
					}
				});
			});
		}

		Kakao.init('c550e7389ae587f38e4478dd047e9df0');
		console.log(Kakao.isInitialized());

		Kakao.Auth.createLoginButton({
			container: '#kakao-login-btn',
			success: function (authObj) {
				Kakao.API.request({
					url: '/v2/user/me',
					success: function (result) {
						$('#result').append(result);
						id = result.id
						email = ''
						connected_at = result.connected_at
						kakao_account = result.kakao_account
						$('#result').append(kakao_account);
						if (typeof kakao_account != 'undefined') {
							// 이메일 받아온 변수
							email = kakao_account.email;
							gender = kakao_account.gender;
						}
						localStorage.setItem("key", email);

						// 이메일 콘솔 출력
						console.log(kakao_account.email);

						// 거북이 생성하기
						create_turtle(email)
					},
					fail: function (error) {
						alert(
							'login success, but failed to request user information: ' +
							JSON.stringify(error)
						)
					},
				})
			},
			fail: function (err) {
				alert('failed to login: ' + JSON.stringify(err))
			},
		});
	</script>
</body>

</html>